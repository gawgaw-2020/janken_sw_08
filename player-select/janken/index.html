<?php include(dirname(__FILE__).'/../../_inc/_header.html'); ?>

    <section class="janken">
      <div class="section-inner">
        <h1 class="janken__heading heading heading--level1">your opponent is ...</h1>
        <p id="js-janken__enemy" class="janken__enemy"><img src="/janken_ogawa_08/image/random-select_1@2x.jpg" alt=""></p>
        <p id="result" class="janken__text text">Lorem ipsum dolor sit amet.</p>
        <div  class="janken__myself">
          <div class="wrapper">
            <p id="js-janken__myself">
              <img src="/janken_ogawa_08/image/random-select_1@2x.jpg" alt="">
            </p>
          </div>
          <button id="battle" class="battle btn btn--light-side btn--round">battle!!</button>
          <button id="more" class="more btn btn--light-side btn--round">more</button>
        </div>
        <div class="janken__btns">
          <a href="/janken_ogawa_08/player-select/" class="btn btn--light-side">player select</a>
          <a href="/janken_ogawa_08/" class="btn btn--light-side">home</a>
        </div>
      </div>
    </section>




      <h1 class="heading heading--level1">level1-heading</h1>
      <h2 class="heading heading--level2">level2-heading</h2>
      <h3 class="heading heading--level3">level3-heading</h3>
      <div class="component-container">
        <p class="text mb40">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat aliquid veritatis eos aspernatur autem reprehenderit exercitationem fuga,</p>
        <p class="text mb40">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
        <div class="content-box content-box--light-side mb40">
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
        </div>
        <div class="content-box content-box--dark-side mb40">
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
        </div>
        <div class="content-box content-box--droid mb40">
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
          <p class="content-box__text text">恐れはダークサイドに通じる。恐れは怒りに、怒りは憎しみに、憎しみは苦痛へ。</p>
        </div>
        <button class="btn btn--light-side mb40">light side</button>
        <button class="btn btn--light-side btn--round mb40">light side</button>
        <button class="btn btn--dark-side mb40">dark side</button>
        <button class="btn btn--dark-side btn--round mb40">dark side</button>
        <button class="btn btn--droid mb40">droid</button>
        <button class="btn btn--droid btn--round mb40">droid</button>
        </div>
  </main>

  <script>
    // -------------------- 宣言・初期化 --------------------
    //ストレージの定義
    const storage = localStorage;
    console.log(storage.selected);

    // タイマーIDのグローバル宣言
    let intervalID;
    // ループカウントの初期化
    let imageCounter = 1;

    // -------------------- 関数にしたもの --------------------

    // 敵の画像をループで回す処理
    function startInterval() {
      intervalID = setInterval(() => {
        $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_${imageCounter}@2x.jpg" alt="">`);
        imageCounter++;
        if (imageCounter > 34) {
          imageCounter = 1;
        }
      }, 200);
    }


    // 敵画像ホバー時に、回す処理を止める
    $('#js-janken__enemy').hover(
      () => {
      clearInterval(intervalID);
    },
      () => {
        startInterval();
      }
    );

    // ページ読み込み時に敵の画像ループを開始
    $(window).on('load', function (){
      startInterval();
    });

    // ストレージに入れていたデータで自分の画像を差し替え

    const selectedCharacter = storage.selected
    if (selectedCharacter === 'dooku') {
      $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/random-select_1@2x.jpg" alt="">');
    }
    if (selectedCharacter === 'anakin') {
      $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/random-select_2@2x.jpg" alt="">');
    }
    if (selectedCharacter === 'obi') {
      $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/random-select_3@2x.jpg" alt="">');
    }

    // バトルボタンをクリックした時の処理
    $('#battle').on('click', () => {
      // 画像を回す処理の停止とホバーの無効化
      clearInterval(intervalID);
      $('#js-janken__enemy').css('pointer-events', 'none').css('height', '130px');
      // ボタンの変更
      $('#battle').css('visibility' , 'hidden');
      $('#more').css('visibility' , 'visible');

      // ランダムの数値を生成
      const randomNumber = Math.floor(Math.random() * 3);

      // アナキンを選んでいた時の処理
      if (selectedCharacter === 'anakin') {
        if (randomNumber === 0) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_1@2x.jpg" alt="">`);
          $('#result').html('you win').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/dooku-anakin@2x.jpg" alt="">');
        }
        if (randomNumber === 1) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_2@2x.jpg" alt="">`);
          $('#result').html('draw').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/bg_anihoshi.gif" alt="">');
        }
        if (randomNumber === 2) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_3@2x.jpg" alt="">`);
          $('#result').html('you lose').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/Anakin-obi@2x.jpg" alt="">');
        }
      }

      // ドゥークーを選んでいた時の処理
      if (selectedCharacter === 'dooku') {
        if (randomNumber === 0) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_1@2x.jpg" alt="">`);
          $('#result').html('draw').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/bg_anihoshi.gif" alt="">');
        }
        if (randomNumber === 1) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_2@2x.jpg" alt="">`);
          $('#result').html('you lose').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/dooku-anakin@2x.jpg" alt="">');
        }
        if (randomNumber === 2) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_3@2x.jpg" alt="">`);
          $('#result').html('you win').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/obi-dooku@2x.jpg" alt="">');
        }
      }

      // オビワンを選んでいた時の処理
      if (selectedCharacter === 'obi') {
        if (randomNumber === 0) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_1@2x.jpg" alt="">`);
          $('#result').html('you lose').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/obi-dooku@2x.jpg" alt="">');
        }
        if (randomNumber === 1) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_2@2x.jpg" alt="">`);
          $('#result').html('you win').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/Anakin-obi@2x.jpg" alt="">');
        }
        if (randomNumber === 2) {
          $('#js-janken__enemy').html(`<img src="/janken_ogawa_08/image/random-select_3@2x.jpg" alt="">`);
          $('#result').html('draw').addClass('text--jedi');
          $('#js-janken__myself').html('<img src="/janken_ogawa_08/image/bg_anihoshi.gif" alt="">');
        }
      }

    });

    // moreボタンを押した時の処理
    $('#more').on('click', () => {

      // ページリロードさせる
      location.reload();

    });

  </script>


  <?php include(dirname(__FILE__).'/../../_inc/_footer.html'); ?>
